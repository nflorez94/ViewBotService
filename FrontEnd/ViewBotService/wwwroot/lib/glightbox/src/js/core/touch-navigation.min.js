/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/glightbox@3.2.0/src/js/core/touch-navigation.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TouchEvents from"./touch-events.js";import{addEvent,addClass,removeClass,hasClass,closest,whichTransitionEvent,cssTransform,windowSize}from"../utils/helpers.js";function resetSlideMove(e){const t=whichTransitionEvent(),s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;let n=hasClass(e,"gslide-media")?e:e.querySelector(".gslide-media"),i=closest(n,".ginner-container"),r=e.querySelector(".gslide-description");s>769&&(n=i),addClass(n,"greset"),cssTransform(n,"translate3d(0, 0, 0)"),addEvent(t,{onElement:n,once:!0,withCallback:(e,t)=>{removeClass(n,"greset")}}),n.style.opacity="",r&&(r.style.opacity="")}export default function touchNavigation(e){if(e.events.hasOwnProperty("touch"))return!1;let t,s,n,i=windowSize(),r=i.width,a=i.height,l=!1,o=null,c=null,d=null,u=!1,g=1,h=1,p=!1,m=!1,f=null,v=null,y=null,T=null,w=0,S=0,C=!1,M=!1,X={},b={},E=0,x=0;const Y=document.getElementById("glightbox-slider"),$=document.querySelector(".goverlay"),q=new TouchEvents(Y,{touchStart:t=>{if(l=!0,(hasClass(t.targetTouches[0].target,"ginner-container")||closest(t.targetTouches[0].target,".gslide-desc")||"a"==t.targetTouches[0].target.nodeName.toLowerCase())&&(l=!1),closest(t.targetTouches[0].target,".gslide-inline")&&!hasClass(t.targetTouches[0].target.parentNode,"gslide-inline")&&(l=!1),l){b=t.targetTouches[0],X.pageX=t.targetTouches[0].pageX,X.pageY=t.targetTouches[0].pageY,E=t.targetTouches[0].clientX,x=t.targetTouches[0].clientY,o=e.activeSlide,c=o.querySelector(".gslide-media"),n=o.querySelector(".gslide-inline"),d=null,hasClass(c,"gslide-image")&&(d=c.querySelector("img"));if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(c=o.querySelector(".ginner-container")),removeClass($,"greset"),t.pageX>20&&t.pageX<window.innerWidth-20)return;t.preventDefault()}},touchMove:i=>{if(!l)return;if(b=i.targetTouches[0],p||m)return;if(n&&n.offsetHeight>a){const e=X.pageX-b.pageX;if(Math.abs(e)<=13)return!1}u=!0;let o,g=i.targetTouches[0].clientX,h=i.targetTouches[0].clientY,f=E-g,v=x-h;if(Math.abs(f)>Math.abs(v)?(C=!1,M=!0):(M=!1,C=!0),t=b.pageX-X.pageX,w=100*t/r,s=b.pageY-X.pageY,S=100*s/a,C&&d&&(o=1-Math.abs(s)/a,$.style.opacity=o,e.settings.touchFollowAxis&&(w=0)),M&&(o=1-Math.abs(t)/r,c.style.opacity=o,e.settings.touchFollowAxis&&(S=0)),!d)return cssTransform(c,`translate3d(${w}%, 0, 0)`);cssTransform(c,`translate3d(${w}%, ${S}%, 0)`)},touchEnd:()=>{if(!l)return;if(u=!1,m||p)return y=f,void(T=v);const t=Math.abs(parseInt(S)),s=Math.abs(parseInt(w));if(!(t>29&&d))return t<29&&s<25?(addClass($,"greset"),$.style.opacity=1,resetSlideMove(c)):void 0;e.close()},multipointEnd:()=>{setTimeout((()=>{p=!1}),50)},multipointStart:()=>{p=!0,g=h||1},pinch:e=>{if(!d||u)return!1;p=!0,d.scaleX=d.scaleY=g*e.zoom;let t=g*e.zoom;if(m=!0,t<=1)return m=!1,t=1,T=null,y=null,f=null,v=null,void d.setAttribute("style","");t>4.5&&(t=4.5),d.style.transform=`scale3d(${t}, ${t}, 1)`,h=t},pressMove:e=>{if(m&&!p){var t=b.pageX-X.pageX,s=b.pageY-X.pageY;y&&(t+=y),T&&(s+=T),f=t,v=s;let e=`translate3d(${t}px, ${s}px, 0)`;h&&(e+=` scale3d(${h}, ${h}, 1)`),cssTransform(d,e)}},swipe:t=>{if(!m)if(p)p=!1;else{if("Left"==t.direction){if(e.index==e.elements.length-1)return resetSlideMove(c);e.nextSlide()}if("Right"==t.direction){if(0==e.index)return resetSlideMove(c);e.prevSlide()}}}});e.events.touch=q}
//# sourceMappingURL=/sm/6dddc400e3c6d42ff31bdac1f2bf6301ba5dbe106815f4dad9c565d2f6cf4b28.map