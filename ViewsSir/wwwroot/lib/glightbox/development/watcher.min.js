/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/glightbox@3.2.0/development/watcher.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const fs=require("fs"),chokidar=require("chokidar"),path=require("path"),notify=require("./notifications"),jscompiler=require("./jscompiler"),postcssCompiler=require("./postcss"),terser=require("terser");let config={js:{src:"src/js",dest:"dist/js"},css:{src:"src/postcss",dest:"dist/css"}};async function handleJavascript(s){s=path.join(config.js.src,"glightbox.js");const i=path.basename(s),e=await jscompiler({file:s,dest:config.js.dest,format:"umd",sourcemap:!1,moduleID:"GLightbox"}).catch((s=>console.log(s)));if(!e)return notify("Build Error","View logs for more info"),console.log(e),!1;const t=i.replace(".js",".min.js"),o=path.join(config.js.dest,i),r=fs.readFileSync(o,"utf8"),c=terser.minify(r),n=path.join(config.js.dest,t);fs.writeFileSync(n,c.code),notify("Javascript Build",`Compiled and Minified ${i}`)}async function handlePostCSS(s){const i=path.basename(s),e=config.css.dest;if(!await postcssCompiler({file:s,dest:e,minify:!0}).catch((s=>console.log(s))))return!1;notify("PostCSS Build",`Compiled and Minified ${i}`)}function filesWatcher(){const s=chokidar.watch(["src"],{ignored:[".DS_Store","src/js/.jshintrc","src/js/.babelrc"],persistent:!0,depth:3,awaitWriteFinish:{stabilityThreshold:500,pollInterval:500}});s.on("change",(s=>s.endsWith(".js")?handleJavascript(s):s.endsWith(".css")?handlePostCSS(s):void 0)),s.on("ready",(()=>notify("Watching files","Initial scan complete. Ready for changes")))}filesWatcher();
//# sourceMappingURL=/sm/047bd1ca3f79a60135397f3f01fdbababa9532883118771419c86b9e2eb887dd.map