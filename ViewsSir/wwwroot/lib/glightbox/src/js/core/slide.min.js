/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/glightbox@3.2.0/src/js/core/slide.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import ZoomImages from"./zoom.js";import DragSlides from"./drag.js";import slideImage from"../slides/image.js";import slideVideo from"../slides/video.js";import slideInline from"../slides/inline.js";import slideIframe from"../slides/iframe.js";import SlideConfigParser from"./slide-parser.js";import{addEvent,addClass,removeClass,hasClass,closest,isMobile,isFunction,isNode,createHTML}from"../utils/helpers.js";export default class Slide{constructor(e,i,s){this.element=e,this.instance=i,this.index=s}setContent(e=null,i=!1){if(hasClass(e,"loaded"))return!1;const s=this.instance.settings,t=this.slideConfig,n=isMobile();isFunction(s.beforeSlideLoad)&&s.beforeSlideLoad({index:this.index,slide:e,player:!1});let d=t.type,l=t.descPosition,r=e.querySelector(".gslide-media"),o=e.querySelector(".gslide-title"),a=e.querySelector(".gslide-desc"),c=e.querySelector(".gdesc-inner"),g=i,m="gSlideTitle_"+this.index,h="gSlideDesc_"+this.index;if(isFunction(s.afterSlideLoad)&&(g=()=>{isFunction(i)&&i(),s.afterSlideLoad({index:this.index,slide:e,player:this.instance.getSlidePlayerInstance(this.index)})}),""==t.title&&""==t.description?c&&c.parentNode.parentNode.removeChild(c.parentNode):(o&&""!==t.title?(o.id=m,o.innerHTML=t.title):o.parentNode.removeChild(o),a&&""!==t.description?(a.id=h,n&&s.moreLength>0?(t.smallDescription=this.slideShortDesc(t.description,s.moreLength,s.moreText),a.innerHTML=t.smallDescription,this.descriptionEvents(a,t)):a.innerHTML=t.description):a.parentNode.removeChild(a),addClass(r.parentNode,`desc-${l}`),addClass(c.parentNode,`description-${l}`)),addClass(r,`gslide-${d}`),addClass(e,"loaded"),"video"!==d){if("external"!==d)return"inline"===d?(slideInline.apply(this.instance,[e,t,this.index,g]),void(t.draggable&&new DragSlides({dragEl:e.querySelector(".gslide-inline"),toleranceX:s.dragToleranceX,toleranceY:s.dragToleranceY,slide:e,instance:this.instance}))):void("image"!==d?isFunction(g)&&g():slideImage(e,t,this.index,(()=>{const i=e.querySelector("img");t.draggable&&new DragSlides({dragEl:i,toleranceX:s.dragToleranceX,toleranceY:s.dragToleranceY,slide:e,instance:this.instance}),t.zoomable&&i.naturalWidth>i.offsetWidth&&(addClass(i,"zoomable"),new ZoomImages(i,e,(()=>{this.instance.resize()}))),isFunction(g)&&g()})));slideIframe.apply(this,[e,t,this.index,g])}else slideVideo.apply(this.instance,[e,t,this.index,g])}slideShortDesc(e,i=50,s=!1){let t=document.createElement("div");t.innerHTML=e;let n=s;if((e=t.innerText.trim()).length<=i)return e;let d=e.substr(0,i-1);return n?(t=null,d+'... <a href="#" class="desc-more">'+s+"</a>"):d}descriptionEvents(e,i){let s=e.querySelector(".desc-more");if(!s)return!1;addEvent("click",{onElement:s,withCallback:(e,s)=>{e.preventDefault();const t=document.body;let n=closest(s,".gslide-desc");if(!n)return!1;n.innerHTML=i.description,addClass(t,"gdesc-open");let d=addEvent("click",{onElement:[t,closest(n,".gslide-description")],withCallback:(e,s)=>{"a"!==e.target.nodeName.toLowerCase()&&(removeClass(t,"gdesc-open"),addClass(t,"gdesc-closed"),n.innerHTML=i.smallDescription,this.descriptionEvents(n,i),setTimeout((()=>{removeClass(t,"gdesc-closed")}),400),d.destroy())}})}})}create(){return createHTML(this.instance.settings.slideHTML)}getConfig(){isNode(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);const e=new SlideConfigParser(this.instance.settings.slideExtraAttributes);return this.slideConfig=e.parseConfig(this.element,this.instance.settings),this.slideConfig}}
//# sourceMappingURL=/sm/4438840136ab21b8393a27b8dc61de14a2662e82c3a33537485d37566398e236.map